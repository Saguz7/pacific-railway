version: 1
frontend:
  phases:
    preBuild:
      commands:
        - npm i --force
    build:
      commands:
        - npm run build --prod
        - API_URL_BASE=$API_URL_BASE
        - REGION_POOL=$REGION_POOL
        - USER_POOL_ID=$USER_POOL_ID
        - APP_POOL_ID=$APP_POOL_ID
        - DOMAIN_SIGN=$DOMAIN_SIGN
        - REDIRECT_SIGNIN=$REDIRECT_SIGNIN
        - IDENTITY_PROVIDER=$IDENTITY_PROVIDER 
  artifacts:
    baseDirectory: dist
    files:
      - '**/*'
  cache:
    paths:
      - node_modules/**/*
